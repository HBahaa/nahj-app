<form [formGroup]="form">


  <div class="content">
    <div class="container-fluid">
      <div class="row">
        <h2 class="col-12">بيانات الجهات و رخص الأستخدام</h2>
      </div>
      <div class="row mt-4">
        <div class="col-lg-3 col-sm-6">
          <app-school-filter (itemDetails)="getItemDetails($event)" (filterChange)="filterSchoolList($event)" (addButton)="addSchool()" (editButton)="editSchool($event)" [update]="updateChildData" (deleteButton)="openDialog($event)" (clearFormFields)="clearFields()" (addContentFlag)="setContentFlag($event)"></app-school-filter>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="card">
            <div class="card-body">
              <div class="form-group">
                <input type="text" formControlName="schoolName" class="form-control" placeholder="اسم المدرسة" />
              </div>
              <div class="form-group">
                <input type="text" formControlName="motherComp" class="form-control" placeholder="الشركة اﻷم" />
              </div>
              <div class="form-group">
                <select class="form-control" (change)="getCities($event)" formControlName="geo">
                    <option>اخنر عنصر</option>
                  <option *ngFor="let geo of geoArray" value="{{geo.id}}">{{geo.name}}</option>
                </select>
              </div>
              <div class="form-group">
                <select class="form-control" formControlName="city">
                  <option>اخنر عنصر</option>
                  <option *ngFor="let city of citiesArray" value="{{city.id}}">{{city.name}}</option>
                </select>
              </div>
              <h5>بيانات المدرسة</h5>
              <ul class="list-group">
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="district" placeholder="الحي">
                </li>
                <li class="list-group-item">
                  <input type="number" class="form-control" formControlName="studentsNum" placeholder="إجمالي عدد الطلاب">
                </li>
                <li class="list-group-item">
                  <input type="number" class="form-control" formControlName="classesNum" placeholder="عدد الفصول الدراسية">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="lowestStudyYear" placeholder="السنة الدرااسية اﻷدني">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="highestStudyYear" placeholder="السنة الدرااسية اﻷعلي">
                </li>
              </ul>
              <div>
                <h5>بيانات اﻷتصال</h5>
                <ul class="list-group">
                  <li class="list-group-item">
                    <input type="text" class="form-control" formControlName="email" placeholder="الموفع اﻹلكتروني">
                  </li>
                  <li class="list-group-item">
                    <input type="text" class="form-control" formControlName="address" placeholder="العنوان">
                  </li>
                  <li class="list-group-item">
                    <input type="text" class="form-control" formControlName="gps" placeholder="GPS الموقع">
                  </li>
                  <li class="list-group-item">
                    <input type="text" class="form-control" formControlName="phone" placeholder="التلفون">
                  </li>
                  <li class="list-group-item">
                    <input type="text" class="form-control" formControlName="fax" placeholder="الفاكس">
                  </li>
                </ul>
              </div>  
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="card">
            <div class="card-body">
              <h5>الموقع في التقسيم الشجري</h5>
              <div class="form-group">
                <select (change)="handleChange('level1', $event)" class="form-control" formControlName="level1">
                  <option>اختر عنصر</option>
                  <option *ngFor="let item of level1; index as i" value="{{item.id}}">{{item.name}}</option>
                </select>
              </div>
              <div class="form-group">
                <select (change)="handleChange('level2', $event)" class="form-control" formControlName="level2">
                  <option>اختر عنصر</option>
                  <option *ngFor="let item of level2; index as i" value="{{item.id}}">{{item.name}}</option>
                </select>
              </div>
              <div class="form-group">
                <select (change)="handleChange('level3', $event)" class="form-control" formControlName="level3">
                  <option>اختر عنصر</option>
                  <option *ngFor="let item of level3; index as i" value="{{item.id}}">{{item.name}}</option>
                </select>
              </div>

              <h5>بيانات المسئول</h5>
              <ul class="list-group">
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="adminName"  placeholder="اﻷسم">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="adminJob" placeholder="الوظيفة">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="adminPhone" placeholder="الجوال">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="adminWhatsApp" placeholder="جوال الواتس اب">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="adminEmail" placeholder="اﻹيميل">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="adminUsername" placeholder="اسم المستخدم">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="adminPassword" placeholder="كلمة السر">
                </li>
              </ul>
              <h5>بيانات اﻷدمن الرئيسي</h5>
              <ul class="list-group">
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="nahjAdminName"  placeholder="اﻷسم">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="nahjAdminJob" placeholder="الوظيفة">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="nahjAdminPhone" placeholder="الجوال">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="nahjAdminWhatsApp" placeholder="جوال الواتس اب">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="nahjAdminEmail" placeholder="اﻹيميل">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="nahjAdminUsername" placeholder="اسم المستخدم">
                </li>
                <li class="list-group-item">
                  <input type="text" class="form-control" formControlName="nahjAdminPassword" placeholder="كلمة السر">
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="card">
            <div class="card-body">            
              
              <div class="form-group">
                <label>الفصل الدراسي</label>
                <select class="form-control" (change)="handleStudyYearChange($event.target.value)" formControlName="studyYears">
                  <option>اختر عنصر</option>
                  <option *ngFor="let term of terms" [value]="term.id">{{ term.name }}</option>
                </select>
              </div>
              <h5>بيانات الرخصة</h5>

              <div class="form-group">
                <input type="number" class="form-control" formControlName="lstudentsNum" placeholder="عدد الطلاب">
              </div>
              <div class="form-group">
                <input type="number" class="form-control" formControlName="lclassesNum" placeholder="عدد الفصول">
              </div>
              <div class="form-group">
                <input type="number" class="form-control" formControlName="lteachersNum" placeholder="عدد المدرسات/ المشرفات">
              </div>
              <div class="form-group">
                <input type="number" class="form-control" formControlName="ladminsNum" placeholder="عدد اﻷدمن">
              </div>
              
              <div class="form-group">
                <h5>المحتوي المرخص</h5>
                <div class="content-list" style="min-height: 80px;max-height: 80px;">
                  <ul *ngFor="let content of speciificContent; let i = index">
                  <li id="{{i}}" (click)="deleteContent($event)">  {{ content && content.speciificContentLevelOne ? content.speciificContentLevelOne.name : "" }} 
                    <ul *ngIf="content && content.speciificContentLevelTwo">
                      <li>
                          {{ content && content.speciificContentLevelTwo ? content.speciificContentLevelTwo.name : "" }}
                          <ul *ngIf="content && content.speciificContentLevelThree"> 
                            <li>
                                {{ content && content.speciificContentLevelThree ? content.speciificContentLevelThree.name : "" }}
                                <ul *ngIf="content && content.speciificContentLevelFour">
                                  <li>
                                      {{ content && content.speciificContentLevelFour ? content.speciificContentLevelFour.name : "" }}
                                  </li>
                                </ul>
                            </li>
                          </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
                </div>
                <button type="button" class="btn btn-primary add-content mt-1" [disabled]="show" data-toggle="modal" data-target="#myModal"><i class="fa fa-plus"></i></button>
              </div>
              <div class="text-left card-footer">
                <button *ngIf="add" class="btn btn-success ml-2" (click)="addTermClicked()" type="button">
                  <i class="fa fa-fw fa-plus"></i>
                </button>
                <button *ngIf="!add" class="btn btn-success ml-2" (click)="addTerm()" type="button">
                  <i class="fa fa-fw fa-save"></i> 
                </button>
                <button class="btn btn-danger" (click)="deleteTerm(item)" type="button">
                  <i class="fa fa-fw fa-close"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">إضافة محتوي جديد</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <select (change)="handleContentChange('content1', $event)" class="form-control" formControlName="content1">
              <option>اختر عنصر</option>
              <option *ngFor="let item of content1; index as i" value="{{item.id}}">{{item.name}}</option>
            </select>
          </div>
          <div class="form-group">
            <select (change)="handleContentChange('content2', $event)" class="form-control" formControlName="content2">
              <option>اختر عنصر</option>
              <option *ngFor="let item of content2; index as i" value="{{item.id}}">{{item.name}}</option>
            </select>
          </div>
          <div class="form-group">
            <select (change)="handleContentChange('content3', $event)" class="form-control" formControlName="content3">
              <option>اختر عنصر</option>
              <option *ngFor="let item of content3; index as i" value="{{item.id}}">{{item.name}}</option>
            </select>
          </div>
          <div class="form-group">
            <select (change)="handleContentChange('content4', $event)" class="form-control" formControlName="content4">
              <option>اختر عنصر</option>
              <option *ngFor="let item of content4; index as i" value="{{item.id}}">{{item.name}}</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button"  class="btn btn-primary ml-1" id="save" (click)="saveLContent()" >حفظ</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">إغلاق</button>
        </div>
      </div>
    </div>
  </div>
</form>